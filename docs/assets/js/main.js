"use strict";const buttonSearch=document.querySelector(".js-button-search"),inputSearch=document.querySelector(".js-input");let listAnime=document.querySelector(".js-list-anime");const listAnimeFavorite=document.querySelector(".js-list-anime-favorite"),buttonReset=document.querySelector(".js-button-reset");let animeFavouriteList,animeSeriesList=[];localStorage.getItem("animeFavouriteList")?(animeFavouriteList=JSON.parse(localStorage.getItem("animeFavouriteList")),renderFavoriteAnime(animeFavouriteList)):animeFavouriteList=[];const noImage="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",newImage="https://via.placeholder.com/210x295/ﬀﬀﬀ/666666/?text=TV";function addListenerToAnimeListItem(){const e=document.querySelectorAll(".js-single-element");for(const t of e)t.addEventListener("click",handleClickFavourite)}function renderAnime(e){let t="";for(const i of e)i.images.jpg.image_url===noImage||null===i.images.jpg.image_url?t+=`<li class="js-single-element" data-id="${i.mal_id}"><img src="${newImage}" alt="new-image" /><h3 class="title-anime">${i.title}</h3></li>`:t+=`<li class="js-single-element" data-id="${i.mal_id}"><img src="${i.images.jpg.image_url}" alt="serie-anime" />\n        <h3 class="title-anime">${i.title}</h3></li>`;listAnime.innerHTML=t,addListenerToAnimeListItem()}function renderFavoriteAnime(e){let t="";if(e.length>0)for(const i of e)t+=`<li class="js-single-element" data-id="${i.mal_id}">\n        <img src="${i.images.jpg.image_url}" alt="new-image" /><h3 class="title-anime list-favorite">${i.title}</h3><button class="js-remove-item-button">X</button>\n        </li>`;listAnimeFavorite.innerHTML=t}function handleClickFavourite(e){let t=e.target.parentElement;const i=parseInt(t.dataset.id),n=animeSeriesList.find(e=>e.mal_id===i),a=animeFavouriteList.findIndex(e=>e.mal_id===i);-1===a?(t.classList.add("favorite"),animeFavouriteList.push(n)):(animeFavouriteList.splice(a,1),t.classList.remove("favorite")),renderFavoriteAnime(animeFavouriteList),localStorage.setItem("animeFavouriteList",JSON.stringify(animeFavouriteList))}function handleClickReset(e){e.preventDefault(),inputSearch.value="",listAnime.innerHTML=""}function handleClickResetAnime(e){if("BUTTON"===e.target.nodeName){let t=e.target.parentElement;const i=parseInt(t.dataset.id),n=animeFavouriteList.findIndex(e=>e.mal_id===i);animeFavouriteList.splice(n,1),renderFavoriteAnime(animeFavouriteList),document.querySelector(`[data-id='${i}']`).classList.remove("favorite"),localStorage.setItem("animeFavouriteList",JSON.stringify(animeFavouriteList))}}function handleClickSearch(e){e.preventDefault();const t=inputSearch.value.toLowerCase();fetch("https://api.jikan.moe/v4/anime?q="+t).then(e=>e.json()).then(e=>{animeSeriesList=e.data,renderAnime(animeSeriesList)})}listAnimeFavorite.addEventListener("click",handleClickResetAnime),buttonSearch.addEventListener("click",handleClickSearch),buttonReset.addEventListener("click",handleClickReset);