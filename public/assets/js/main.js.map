{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n/* PUNTO 1 --> Hecho\n1. [X]Realizar estructura basica html (h1, input te tipo texto, boton \"buscar\" y un boton \"reset\", listado de resultados donde tenemos el cartel de la serie osea foto y el titulo)\n\nPUNTO 2\n1. [X]Escuchar un evento sobre el boton de busqueda para conectarse al API para ver que datos necesitamos\n2.[X] Para la URL hay que recoger el texto del input de la usuaria y concatenarlo en link\n3.[X] Para cada serie del resultado del input hay que pintar el cartel y el titulo de la serie\n4.[X] Algunas series no tiene foto, hay que detectar cuales son y asignarle una foto (https://via.placeholder.com/210x295/ﬀﬀﬀ/666666/?text=TV)\n5.[X] Para pintar en el html utilizamos el InnerHTML\n\nPUNTO 3\n1. Una vez que se vean los resultados de la busqueda, la usuario puede elegir los favoritos y hay que hacer click en una serie y tendra que pasar lo siguiente:\n--> color de fondo y de fuente se intercambian\n--> listado de favoritos en la izquierda (recomendable array para almacenar favoritos)\n--> series favoritas deben seguir apareciendo a la izquierda aunque la usuaria realice otra búsqueda\n\nPUNTO 4\n1.Hay que almacenar el listado de favoritos en el localStorage. De esta forma, al recargar la página el listado de favoritos se debe mostrarse\n\nPUNTO 5 BONUS\n1. Borrar favoritos del localStorage y otras cosas mas. Mirar el enunciado\n\nPUNTO 6\n1. Afinar la maquetacion\n*/\n\nconst buttonSearch = document.querySelector('.js-button-search');\nconst inputSearch = document.querySelector('.js-input');\nlet listAnime = document.querySelector('.js-list-anime');\nconst listAnimeFavorite = document.querySelector('.js-list-anime-favorite');\nlet animeSeriesList = [];\nlet animeFavouriteList; // Animefavoritelist no habria que igualarlo a array vacio\n// Local storage\n/* Al cargar la pagina vemos el local storage y si hay algo, animeFavoriteList seria igual a lo que haya despues del hacer el get del local  (localStorage.getItem('animeFavList');)*/\nif(localStorage.getItem(\"animeFavouriteList\")) {\n    animeFavouriteList = JSON.parse(localStorage.getItem(\"animeFavouriteList\"))\n    renderFavoriteAnime(animeFavouriteList);\n} else {\n    animeFavouriteList = [];\n}\n\n// Images/Placeholder\nconst noImage = \"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png\";\nconst newImage = \"https://via.placeholder.com/210x295/ﬀﬀﬀ/666666/?text=TV\";\n\nfunction addListenerToAnimeListItem() {\n    const singleElement = document.querySelectorAll('.js-single-element');\n    for (const element of singleElement) {\n        element.addEventListener(\"click\" , handleClickFavourite);\n    }\n}\n\nfunction renderAnime(list) {\n    let html = \"\";\n    for (const eachTitlePhoto of list) {\n    if(eachTitlePhoto.images.jpg.image_url === noImage || eachTitlePhoto.images.jpg.image_url === null) {\n        html += `<li class=\"js-single-element\" id=\"${eachTitlePhoto.mal_id}\"><img src=\"${newImage}\" alt=\"new-image\" /><h3 class=\"title-anime\">${eachTitlePhoto.title}</h3></li>`;\n    } else {\n        html += `<li class=\"js-single-element\" id=\"${eachTitlePhoto.mal_id}\"><img src=\"${eachTitlePhoto.images.jpg.image_url}\" alt=\"serie-anime\" />\n        <h3 class=\"title-anime\">${eachTitlePhoto.title}</h3></li>`;\n    }\n    }\n    listAnime.innerHTML = html;\n    addListenerToAnimeListItem();\n}\n\nfunction renderFavoriteAnime(list) {\n    let html = \"\";\n    if(list.length > 0) {\n        for (const listFavorite of list) {\n        html += `<li class=\"js-single-element\" id=\"${listFavorite.mal_id}\"><img src=\"${listFavorite.images.jpg.image_url}\" alt=\"new-image\" /><h3 class=\"title-anime\">${listFavorite.title}</h3></li>`;\n    }\n    }\n    \n    listAnimeFavorite.innerHTML = html;\n}\n\nfunction handleClickFavourite(ev) {\n    let currentLiElement = ev.target.parentElement\n    const idSelected = parseInt(currentLiElement.id);\n    const animeFound = animeSeriesList.find((anime) => anime.mal_id === idSelected);\n    const animeFavourite = animeFavouriteList.findIndex((fav) => fav.mal_id === idSelected);\n    if (animeFavourite === -1) {\n        currentLiElement.classList.add(\"favorite\");\n        animeFavouriteList.push(animeFound);\n    } else {\n        animeFavouriteList.splice(animeFavouriteList, 1)\n        currentLiElement.classList.remove(\"favorite\");\n    }\n    renderFavoriteAnime(animeFavouriteList);\n    localStorage.setItem(\"animeFavouriteList\", JSON.stringify(animeFavouriteList));\n}\n\nfunction handleClickSearch(ev) {\n    ev.preventDefault();\n    const inputValue = inputSearch.value.toLowerCase();\n    fetch(`https://api.jikan.moe/v4/anime?q=${inputValue}`)\n    .then((response) => response.json())\n    .then((data) => {\n        animeSeriesList = data.data;\n        console.log(animeSeriesList);\n        renderAnime(animeSeriesList);\n    })\n    // .catch((error) => renderError(error.message))\n}\n\nbuttonSearch.addEventListener(\"click\" , handleClickSearch);\n\n\n"]}